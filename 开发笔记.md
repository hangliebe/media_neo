## 找不到libavformat等so的问题

```
Line 955: 01-01 23:41:40.570 13356 13356 E AndroidRuntime: java.lang.UnsatisfiedLinkError: dalvik.system.PathClassLoader[DexPathList[[zip file "/data/app/com.hangliebe.medianeo-MeUppsLZGVa0KDIjsvDlTQ==/base.apk"],nativeLibraryDirectories=[/data/app/com.hangliebe.medianeo-MeUppsLZGVa0KDIjsvDlTQ==/lib/arm64, /data/app/com.hangliebe.medianeo-MeUppsLZGVa0KDIjsvDlTQ==/base.apk!/lib/arm64-v8a, /system/lib64, /hw_product/lib64, /system/product/lib64, /prets/lib64]]] couldn't find "libavformat.so"
```

ffmpeg工程刚开发，编译出来的apk中一直没有ffmpeg的组件资源，下面libswscale等so总是不能打包进apk。

![1641094692042](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1641094692042.png)

我已经设置了sourceSets，但是还是不行。

```
sourceSets {
	main {
		jniLibs.srcDir 'libs'
		jni.srcDirs = []
	}
}
```

最终解决方案：

后来将so直接放置在`app\libs\arm64-v8a`文件夹下就可以了。

在这之前是在`app\libs\arm64-v8a\lib`文件夹下![1641097866692](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1641097866692.png)

## avcodec_open2失败

> 01-02 11:32:14.105 18577 18577 W gliebe.medianeo: type=1400 audit(0.0:51427): avc: denied { read } for pid=18577 name="/" dev="tmpfs" ino=9648 scontext=u:r:untrusted_app:s0:c76,c257,c512,c768 tcontext=u:object_r:device:s0 tclass=dir permissive=0
>
> 01-02 11:32:14.110 18577 18577 E FFMPEG_HANDLE: Failed to open encoder,error code:-13 !

```
ret = avcodec_open2(pCodecCtx, pCodec, &param);
if ( ret < 0) {
	LOGE("Failed to open encoder,error code:%d !\n", ret);
	return -1;
}
```

